// ==SE_module==
// name: auto_open_chat
// displayName: Auto Open Chat
// description: ÙŠÙØªØ­ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ØµØ¯ÙŠÙ‚ khalid-sawalha Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø³Ù†Ø§Ø¨ Ø´Ø§Øª
// version: 1.0
// author: You
// ==/SE_module==

module.onSnapMainActivityCreate = (activity) => {
    try {
        // ğŸ”¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
        const targetUsername = "khalid-sawalha";

        // Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
        const ConversationManager = Java.use("com.snapchat.android.chat.ConversationManager");
        const convManager = ConversationManager.getInstance();

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ØµØ¯ÙŠÙ‚
        const conversation = convManager.getConversation(targetUsername);

        if (conversation != null) {
            const ChatActivity = Java.use("com.snapchat.android.chat.activity.ChatActivity");
            const Intent = Java.use("android.content.Intent");

            const intent = new Intent(activity, ChatActivity.class);
            intent.putExtra("conversation_id", conversation.getId());

            activity.startActivity(intent);
            longToast("âœ… ØªÙ… ÙØªØ­ Ø¯Ø±Ø¯Ø´Ø©: " + targetUsername);
        } else {
            longToast("âŒ Ù…Ø§ Ù„Ù‚ÙŠØª Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹: " + targetUsername);
        }
    } catch (err) {
        longToast("âš ï¸ Ø®Ø·Ø£: " + err);
    }
};

module.onUnload = () => {
    shortToast("ğŸ“´ Ø³ÙƒØ±Ø¨Øª Auto Open Chat ØªØ¹Ø·Ù‘Ù„");
};
