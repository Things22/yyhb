// ==SE_module==
// name: auto_open_chat
// displayName: Auto Open Chat
// description: يفتح دردشة الصديق khalid-sawalha مباشرة عند فتح سناب شات
// version: 1.0
// author: You
// ==/SE_module==

module.onSnapMainActivityCreate = (activity) => {
    try {
        // 🔹 اسم المستخدم المستهدف
        const targetUsername = "khalid-sawalha";

        // الوصول لمدير المحادثات
        const ConversationManager = Java.use("com.snapchat.android.chat.ConversationManager");
        const convManager = ConversationManager.getInstance();

        // البحث عن محادثة الصديق
        const conversation = convManager.getConversation(targetUsername);

        if (conversation != null) {
            const ChatActivity = Java.use("com.snapchat.android.chat.activity.ChatActivity");
            const Intent = Java.use("android.content.Intent");

            const intent = new Intent(activity, ChatActivity.class);
            intent.putExtra("conversation_id", conversation.getId());

            activity.startActivity(intent);
            longToast("✅ تم فتح دردشة: " + targetUsername);
        } else {
            longToast("❌ ما لقيت محادثة مع: " + targetUsername);
        }
    } catch (err) {
        longToast("⚠️ خطأ: " + err);
    }
};

module.onUnload = () => {
    shortToast("📴 سكربت Auto Open Chat تعطّل");
};
